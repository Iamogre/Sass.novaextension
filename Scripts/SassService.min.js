class SassService{constructor(){}get getArgs(){var s=nova.workspace.config.get("VineCode.Sass.cssStyle"),e=nova.workspace.config.get("VineCode.Sass.errorCss"),a=nova.workspace.config.get("VineCode.Sass.sourceMap"),o=nova.workspace.config.get("VineCode.Sass.execPath");o||(o="sass"),o=o.replace(/(\s+)/g,"\\$1");var n=[];return n.push(o),"Compressed"==s?n.push("--style=compressed"):n.push("--style=expanded"),"Yes"==e?n.push("--error-css"):n.push("--no-error-css"),"Internal"==a?n.push("--embed-source-map"):"None"==a&&n.push("--no-source-map"),n}async compileSassUpdate(s){if(0!=nova.workspace.config.get("VineCode.Sass.workspaceEnable")){var e=s.document.path;if("scss"==e.slice(2+(e.lastIndexOf(".")-1>>>0))||"sass"==e.slice(2+(e.lastIndexOf(".")-1>>>0))){var a=e.substr(0,e.lastIndexOf("/"));"scss"==a.substr(a.lastIndexOf("/")+1).toLowerCase()&&(a=a.substr(0,a.lastIndexOf("/")));var o=nova.workspace.config.get("VineCode.Sass.updatePath");o&&"null"!=o&&(o=o.trim("/"),a=nova.workspace.path+"/"+o.replace(/^\/+/,""));var n=nova.workspace.config.get("VineCode.Sass.outputPath");n&&"null"!=n&&(n=n.trim("/"),a=a+":"+nova.workspace.path+"/"+n.replace(/^\/+/,""));var r=this.getArgs;r.push("--update"),r.push(a);var t=new Process("/usr/bin/env",{args:r}),i=new Array;t.onStdout(function(s){i.push(s.trim())});var c=new Array;return t.onStderr(function(s){c.push(s.trim())}),t.onDidExit(function(){if(c.length>0){nova._notificationTimer&&clearTimeout(nova._notificationTimer);c[0];c.length>1&&c[c.length-1];let s=new NotificationRequest("sass-error");s.title=nova.localize("Sass Compile Error"),s.body=nova.localize(c[0]+"\n"+c[c.length-1]),s.actions=[nova.localize("Dismiss")];nova.notifications.add(s);nova._notificationTimer=setTimeout(function(){nova.notifications.cancel("sass-error")},1e4)}else nova.notifications.cancel("sass-error")}),t.start(),!0}}}}module.exports=SassService;